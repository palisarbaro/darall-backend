(function(){"use strict";var t={6195:function(t,e,n){n(678),n(4193);var i=n(7195),s=n(2241),r=n(8315);i["default"].use(r.ZPm);var o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("NavBar"),e("div",{staticStyle:{"margin-top":"60px"}},[e("router-view")],1)],1)},a=[],c=function(){var t=this,e=t._self._c;return e("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info",fixed:"top"}},[e("b-navbar-brand",{attrs:{href:"#"}},[t._v("Меню")]),e("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e("b-navbar-nav",t._l(t.sections,(function(n){return e("b-nav-item",{key:n.htmlId,attrs:{href:"#"+n.htmlId}},[t._v(t._s(n.name))])})),1)],1)],1)},u=[],d=n(408),l={name:"NavBar",computed:{...(0,d.Se)(["sections"])},async mounted(){}},m=l,p=n(1001),f=(0,p.Z)(m,c,u,!1,null,"0647d5fe",null),h=f.exports,v={name:"App",methods:{...(0,d.nv)(["loadSections"])},async mounted(){await this.loadSections()},components:{NavBar:h}},b=v,g=(0,p.Z)(b,o,a,!1,null,null,null),y=g.exports,_=function(){var t=this,e=t._self._c;return e("div",[e("SaveForm",{ref:"saveForm",on:{saved:function(e){return t.updateDishes()}}}),t._l(t.processedSections,(function(n){return e("div",{key:n.id,staticClass:"mt-5"},[e("h1",{staticClass:"text-center",staticStyle:{"scroll-margin":"60px"},attrs:{id:n.id}},[t._v(t._s(n.name))]),0!==n.dishes.length||t.isAdmin?t._e():e("h2",{staticClass:"text-center text-muted"},[t._v(" В этой категории пока нет блюд")]),e("b-container",[e("b-row",t._l(n.dishes,(function(n){return e("MenuPosition",{key:n.id,staticClass:"col-12 col-md-6 col-lg-4 text-break",staticStyle:{"max-width":"600px"},attrs:{name:n.name,description:n.description,"img-src":n.img,price:n.price}},[t.isAdmin?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.my-modal",modifiers:{"my-modal":!0}}],staticClass:"w-100 mt-auto",on:{click:function(e){t.$refs.saveForm.dish={...n}}}},[t._v(t._s(n.fake?"Добавить":"Редактировать"))]):t._e()],1)})),1)],1)],1)}))],2)},x=[],S=(n(7658),function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("b-card",{staticClass:"rounded",staticStyle:{height:"100%"},attrs:{"no-body":""}},[e("b-card-body",{staticClass:"text-center d-flex flex-column h-100"},[e("img",{attrs:{src:t.fullImageSrc}}),e("h2",{staticClass:"card-title"},[t._v(t._s(t.name))]),e("h4",[t._v("Цена: "+t._s(t.price)+" руб.")]),e("b-card-text",{staticClass:"text-center"},[t._v(" "+t._s(t.description)+" ")]),t._t("default")],2)],1)],1)}),w=[],k={name:"MenuPosition",props:{name:String,price:Number,description:String,imgSrc:String},computed:{fullImageSrc(){return"/img/"+this.imgSrc}},mounted(){}},I=k,P=(0,p.Z)(I,S,w,!1,null,"3caa5aed",null),O=P.exports,Z=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"my-modal","ok-title":"Save"},on:{ok:t.savePosition}},[e("b-form",{ref:"form"},[e("b-form-group",{attrs:{id:"input-group-1",label:"Название блюда:","label-for":"input-1"}},[e("b-form-input",{attrs:{id:"input-1",type:"text",required:"",name:"name"},model:{value:t.dish.name,callback:function(e){t.$set(t.dish,"name",e)},expression:"dish.name"}})],1),e("b-form-group",{attrs:{id:"input-group-2",label:"Цена:","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"input-2",type:"number",name:"price",required:""},model:{value:t.dish.price,callback:function(e){t.$set(t.dish,"price",e)},expression:"dish.price"}})],1),e("b-form-group",{attrs:{id:"input-group-3",label:"Описание:","label-for":"input-3"}},[e("b-form-textarea",{attrs:{id:"input-3",type:"text",name:"description",required:""},model:{value:t.dish.description,callback:function(e){t.$set(t.dish,"description",e)},expression:"dish.description"}})],1),e("b-form-group",{attrs:{id:"input-group-4",label:"Картинка:","label-for":"input-4"}},[e("b-form-file",{attrs:{id:"input-4",required:"",name:"image"}})],1),e("b-form-group",{attrs:{id:"input-group-5",label:"Категория:","label-for":"input-5"}},[e("b-form-select",{attrs:{id:"input-5",options:t.options,required:"",name:"section"},model:{value:t.dish.section,callback:function(e){t.$set(t.dish,"section",e)},expression:"dish.section"}})],1),e("b-form-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"input-6",type:"number",name:"id",required:""},model:{value:t.dish.id,callback:function(e){t.$set(t.dish,"id",e)},expression:"dish.id"}})],1)],1)},C=[],F={name:"SaveForm",data(){return{dish:{}}},computed:{...(0,d.Se)(["sections"]),options(){return this.sections.map((t=>({value:t.htmlId,text:t.name})))}},methods:{...(0,d.nv)(["sendForm"]),async savePosition(){const t=new FormData(this.$refs.form);await this.sendForm(t),this.$emit("saved")}}},D=F,M=(0,p.Z)(D,Z,C,!1,null,"64218ba1",null),$=M.exports;let j={id:-1,name:"Новое блюдо",price:11e3,description:"Описание",img:"no-image.png",fake:!0};var N={name:"MenuPage",components:{MenuPosition:O,SaveForm:$},props:{isAdmin:{type:Boolean,default:!1}},data(){return{currentDish:JSON.parse(JSON.stringify(j)),sections:[]}},methods:{...(0,d.nv)(["loadDishes"]),async updateDishes(){let t=await this.loadDishes();this.sections=t}},computed:{processedSections(){const t=[];for(const e of this.sections){const n=this.isAdmin?[{section:e.id,...j}]:[];t.push({id:e.id,name:e.name,dishes:[...e.dishes,...n]})}return t}},async mounted(){await this.updateDishes()}},q=N,A=(0,p.Z)(q,_,x,!1,null,"d20e8dd0",null),T=A.exports,B=function(){var t=this,e=t._self._c;return e("div",[e("MenuPage",{attrs:{"is-admin":!0}})],1)},J=[],E={name:"AdminPage",components:{MenuPage:T}},z=E,G=(0,p.Z)(z,B,J,!1,null,"495c74ba",null),H=G.exports,K=(n(7024),n(19));i["default"].use(d.ZP);let L=[{htmlId:"snaks",name:"Закуски"},{htmlId:"hot",name:"Горячие блюда"}];var Q=new d.ZP.Store({state:{sections:L,sectionIds:L.map((t=>t.htmlId))},getters:{sections(t){return t.sections},sectionIds(t){return t.sectionIds}},mutations:{addSection(t,e){t.sectionIds.includes(e.htmlId)||(t.sectionIds.push(e.htmlId),t.sections.push(e))}},actions:{async loadSections({commit:t}){const e="/api/sections",n=await K.Z.get(e);for(const i of n.data)t("addSection",i)},async loadDishes(){const t="/api/dishes",e=await K.Z.get(t),n=[];for(const i of e.data)n.push({id:i.htmlId,name:i.name,dishes:i.Dish.map((t=>({section:i.htmlId,...t})))});return n},async sendForm(t,e){await K.Z.post("/api/dishes",e,{headers:{"Content-Type":"multipart/form-data"}})}},modules:{}});i["default"].config.productionTip=!1,i["default"].use(s.Z);const R=[{path:"/",component:T},{path:"/admin",component:H}],U=new s.Z({mode:"history",routes:R});new i["default"]({render:t=>t(y),store:Q,router:U}).$mount("#app")}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,i,s,r){if(!i){var o=1/0;for(d=0;d<t.length;d++){i=t[d][0],s=t[d][1],r=t[d][2];for(var a=!0,c=0;c<i.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every((function(t){return n.O[t](i[c])}))?i.splice(c--,1):(a=!1,r<o&&(o=r));if(a){t.splice(d--,1);var u=s();void 0!==u&&(e=u)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[i,s,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,r,o=i[0],a=i[1],c=i[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(c)var d=c(n)}for(e&&e(i);u<o.length;u++)r=o[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(d)},i=self["webpackChunkmenu"]=self["webpackChunkmenu"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(6195)}));i=n.O(i)})();
//# sourceMappingURL=app.c0347963.js.map